(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(17),a=t.n(c),o=t(8),r=t(3),s=t(2),i=t(0),u=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(i.jsxs)("div",{children:["filter shown with"," ",Object(i.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.addPerson,t=e.newName,c=e.handleNameChange,a=e.newNumber,o=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name:"," ",Object(i.jsx)("input",{value:t,onChange:c})]}),Object(i.jsxs)("div",{children:["number:"," ",Object(i.jsx)("input",{value:a,onChange:o})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.contact,t=e.deleteContact;return Object(i.jsxs)("div",{children:[n.name," ",n.number,Object(i.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(n.name," ?"))&&t(n)},children:"delete"})]})},h=t(4),f=t.n(h),j="/api/persons",b=function(e){var n=e.persons,t=e.personsToShow,c=e.handleDeleteContact,a=e.handleNotifcation,o=function(e){var t=e.id,o=e.name;(function(e){return f.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))})(t).then((function(){c(n.filter((function(e){return e.id!==t}))),a({message:"Removed ".concat(o," from the server"),isSuccess:!0})})).catch((function(e){a({message:"Information of ".concat(o," has already been removed from the server"),isSuccess:!1}),c(n.filter((function(e){return e.id!==t})))}))};return Object(i.jsx)(i.Fragment,{children:t.map((function(e){return Object(i.jsx)(l,{contact:e,deleteContact:o},e.name)}))})},m=function(e){var n=e.notification;return null===n.message?null:n.isSuccess?Object(i.jsx)("div",{className:"success",children:n.message}):Object(i.jsx)("div",{className:"error",children:n.message})},O=function(){var e=Object(s.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(s.useState)(""),l=Object(r.a)(a,2),h=l[0],O=l[1],v=Object(s.useState)(""),g=Object(r.a)(v,2),p=g[0],x=g[1],w=Object(s.useState)(""),C=Object(r.a)(w,2),S=C[0],N=C[1],k=Object(s.useState)({message:null,isSuccess:null}),y=Object(r.a)(k,2),F=y[0],D=y[1],I=function(e){c(e)},P=function(e){D(e),setTimeout((function(){D({message:null,isSuccess:null})}),5e3)};Object(s.useEffect)((function(){f.a.get(j).then((function(e){return e.data})).then((function(e){c(e)}))}),[]);var T=S?t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})):t;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(m,{notification:F}),Object(i.jsx)(u,{newFilter:S,handleFilterChange:function(e){N(e.target.value)}}),Object(i.jsx)("h3",{children:"add a new"}),Object(i.jsx)(d,{newName:h,newNumber:p,addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===h})),a=Object(o.a)(Object(o.a)({},n),{},{number:p});if(n)window.confirm("".concat(h," is already added to phonebook, replace the old one with a new one?"))&&(r=n.id,s=a,f.a.put("".concat(j,"/").concat(r),s).then((function(e){return e.data}))).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),O(""),x(""),P({message:"Updated ".concat(e.name,"'s contact info in the server"),isSuccess:!0})})).catch((function(e){P({message:"Information of ".concat(a.name," has already been removed from the server"),isSuccess:!1}),I(t.filter((function(e){return e.id!==a.id})))}));else{var r,s,i,u={name:h,number:p};(i=u,f.a.post(j,i).then((function(e){return e.data}))).then((function(e){c(t.concat(e)),O(""),x(""),P({message:"Added ".concat(u.name),isSuccess:!0})}))}},handleNameChange:function(e){O(e.target.value)},handleNumberChange:function(e){x(e.target.value)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(b,{persons:t,personsToShow:T,handleDeleteContact:I,handleNotifcation:P})]})};t(41);a.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.6df1d4a3.chunk.js.map