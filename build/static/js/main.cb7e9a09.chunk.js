(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(17),a=t.n(c),o=t(8),s=t(3),r=t(2),i=t(0),u=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(i.jsxs)("div",{children:["filter shown with"," ",Object(i.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.addPerson,t=e.newName,c=e.handleNameChange,a=e.newNumber,o=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name:"," ",Object(i.jsx)("input",{value:t,onChange:c})]}),Object(i.jsxs)("div",{children:["number:"," ",Object(i.jsx)("input",{value:a,onChange:o})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.contact,t=e.deleteContact;return Object(i.jsxs)("div",{children:[n.name," ",n.number,Object(i.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(n.name," ?"))&&t(n)},children:"delete"})]})},h=t(4),j=t.n(h),b="/api/persons",f=function(e){var n=e.persons,t=e.personsToShow,c=e.handleDeleteContact,a=e.handleNotifcation,o=function(e){var t=e.id,o=e.name;(function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))})(t).then((function(){c(n.filter((function(e){return e.id!==t}))),a({message:"Removed ".concat(o," from the server"),isSuccess:!0})})).catch((function(e){a({message:"Information of ".concat(o," has already been removed from the server"),isSuccess:!1}),c(n.filter((function(e){return e.id!==t})))}))};return Object(i.jsx)(i.Fragment,{children:t.map((function(e){return Object(i.jsx)(l,{contact:e,deleteContact:o},e.name)}))})},m=function(e){var n=e.notification;return null===n.message?null:n.isSuccess?Object(i.jsx)("div",{className:"success",children:n.message}):Object(i.jsx)("div",{className:"error",children:n.message})},O=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),l=Object(s.a)(a,2),h=l[0],O=l[1],v=Object(r.useState)(""),p=Object(s.a)(v,2),g=p[0],x=p[1],w=Object(r.useState)(""),S=Object(s.a)(w,2),C=S[0],N=S[1],k=Object(r.useState)({message:null,isSuccess:null}),F=Object(s.a)(k,2),y=F[0],D=F[1],P=function(e){D(e),setTimeout((function(){D({message:null,isSuccess:null})}),5e3)};Object(r.useEffect)((function(){j.a.get(b).then((function(e){return e.data})).then((function(e){c(e)}))}),[]);var T=C?t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())})):t;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(m,{notification:y}),Object(i.jsx)(u,{newFilter:C,handleFilterChange:function(e){N(e.target.value)}}),Object(i.jsx)("h3",{children:"add a new"}),Object(i.jsx)(d,{newName:h,newNumber:g,addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===h})),a=Object(o.a)(Object(o.a)({},n),{},{number:g});if(n)window.confirm("".concat(h," is already added to phonebook, replace the old one with a new one?"))&&(s=n.id,r=a,j.a.put("".concat(b,"/").concat(s),r).then((function(e){return e.data}))).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),O(""),x(""),P({message:"Updated ".concat(e.name,"'s contact info in the server"),isSuccess:!0})})).catch((function(e){console.log(e.response.data),P({message:"".concat(e.response.data.error),isSuccess:!1})}));else{var s,r,i,u={name:h,number:g};(i=u,j.a.post(b,i).then((function(e){return e.data}))).then((function(e){c(t.concat(e)),O(""),x(""),P({message:"Added ".concat(u.name),isSuccess:!0})})).catch((function(e){console.log("Kiran",e.response.data),P({message:"".concat(e.response.data.error),isSuccess:!1})}))}},handleNameChange:function(e){O(e.target.value)},handleNumberChange:function(e){x(e.target.value)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(f,{persons:t,personsToShow:T,handleDeleteContact:function(e){c(e)},handleNotifcation:P})]})};t(41);a.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.cb7e9a09.chunk.js.map